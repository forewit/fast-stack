import{c as te,d as o,t as g,e as Z,f as Le}from"../chunks/BPcmgNTo.js";import{i as Te}from"../chunks/QIxnTgGD.js";import{E as $,p as N,O as k,_ as Q,P as C,N as U,u as j,y as Me,Q as m,J as r,aj as x,al as Ae,a1 as a,an as F,a6 as Ve,aw as Je}from"../chunks/BtmB9of-.js";import{I as Oe,s as Qe,a as G,c as H,b as re,d as Ge,g as He,e as Ke}from"../chunks/cF10xJCp.js";import{b as Ee}from"../chunks/Cqt7Nx2C.js";import{g as We}from"../chunks/b4vJp4RM.js";import{s as Se}from"../chunks/DFAkdCK6.js";import{l as Xe,s as Ye,p as S,r as se,i as E,c as ee}from"../chunks/Ctvxg17e.js";import{b as le}from"../chunks/Cv7YTw1q.js";import{c as Ze,I as ae,B as O}from"../chunks/Co84Qvhm.js";import{L as qe,C as ea}from"../chunks/1EGuFWYK.js";function aa(f,e){const i=Xe(e,["children","$$slots","$$events","$$legacy"]);Oe(f,Ye({name:"triangle-alert"},()=>i,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(t,s)=>{var n=te(),l=$(n);Qe(l,e,"default",{}),o(t,n)},$$slots:{default:!0}}))}var ta=g("<div><!></div>");function ra(f,e){N(e,!0);let i=S(e,"ref",15,null),u=se(e,["$$slots","$$events","$$legacy","ref","class","children"]);var t=ta();let s;var n=k(t);G(n,()=>e.children??Q),C(t),le(t,l=>i(l),()=>i()),U(l=>s=re(t,s,{class:l,...u}),[()=>H("bg-card text-card-foreground rounded-lg border shadow-sm",e.class)]),o(f,t),j()}var sa=g("<div><!></div>");function la(f,e){N(e,!0);let i=S(e,"ref",15,null),u=se(e,["$$slots","$$events","$$legacy","ref","class","children"]);var t=sa();let s;var n=k(t);G(n,()=>e.children??Q),C(t),le(t,l=>i(l),()=>i()),U(l=>s=re(t,s,{class:l,...u}),[()=>H("p-6",e.class)]),o(f,t),j()}var oa=g("<div><!></div>");function na(f,e){N(e,!0);let i=S(e,"ref",15,null),u=se(e,["$$slots","$$events","$$legacy","ref","class","children"]);var t=oa();let s;var n=k(t);G(n,()=>e.children??Q),C(t),le(t,l=>i(l),()=>i()),U(l=>s=re(t,s,{class:l,...u}),[()=>H("flex flex-col space-y-1.5 p-6 pb-0",e.class)]),o(f,t),j()}const ia=Ze({base:"[&>svg]:text-foreground relative w-full rounded-lg border p-4 [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg~*]:pl-7",variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}});var da=g("<div><!></div>");function ca(f,e){N(e,!0);let i=S(e,"ref",15,null),u=S(e,"variant",3,"default"),t=se(e,["$$slots","$$events","$$legacy","ref","class","variant","children"]);var s=da();let n;var l=k(s);G(l,()=>e.children??Q),C(s),le(s,h=>i(h),()=>i()),U(h=>n=re(s,n,{class:h,...t,role:"alert"}),[()=>H(ia({variant:u()}),e.class)]),o(f,s),j()}var ua=g("<div><!></div>");function fa(f,e){N(e,!0);let i=S(e,"ref",15,null),u=se(e,["$$slots","$$events","$$legacy","ref","class","children"]);var t=ua();let s;var n=k(t);G(n,()=>e.children??Q),C(t),le(t,l=>i(l),()=>i()),U(l=>s=re(t,s,{class:l,...u}),[()=>H("text-sm [&_p]:leading-relaxed",e.class)]),o(f,t),j()}var va=g("<div><!></div>");function ma(f,e){N(e,!0);let i=S(e,"ref",15,null),u=S(e,"level",3,5),t=se(e,["$$slots","$$events","$$legacy","ref","class","level","children"]);var s=va();let n;var l=k(s);G(l,()=>e.children??Q),C(s),le(s,h=>i(h),()=>i()),U(h=>n=re(s,n,{role:"heading","aria-level":u(),class:h,...t}),[()=>H("mb-1 font-medium leading-none tracking-tight",e.class)]),o(f,s),j()}var ga=g("<!> <!> <!>",1),_a=g('<div class="w-full flex justify-center"><div class="w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"></div></div>'),ha=g("<!> ",1),pa=g('<form class="flex flex-col gap-4"><!> <!> <!> <!></form>'),wa=g("<!> Create account",1),ba=g('<form class="flex flex-col gap-4"><!> <!> <!> <!> <!> <!></form>'),Pa=g("<!> Login",1),ya=g('<form class="flex flex-col gap-4"><!> <!> <!> <!> <div class="flex justify-between"><!> <!></div></form>'),xa=g("<!> <!>",1);function $a(f,e){N(e,!0);const i=(d,w)=>{let fe=Ve(()=>Je(w==null?void 0:w(),!1));var ve=te(),Pe=$(ve);const ye=Ae(()=>r(fe)?"destructive":"default");ee(Pe,()=>ca,(xe,Re)=>{Re(xe,{class:"py-2",get variant(){return r(ye)},children:(me,$e)=>{var ge=ga(),W=$(ge);{var oe=p=>{aa(p,{class:"size-4"})},ne=p=>{ea(p,{class:"size-4"})};E(W,p=>{r(fe)?p(oe):p(ne,!1)})}var _e=m(W,2);ee(_e,()=>ma,(p,ie)=>{ie(p,{children:(de,I)=>{F();var P=Z();U(()=>Se(P,r(L))),o(de,P)},$$slots:{default:!0}})});var T=m(_e,2);ee(T,()=>fa,(p,ie)=>{ie(p,{children:(de,I)=>{F();var P=Z();U(()=>Se(P,r(A))),o(de,P)},$$slots:{default:!0}})}),o(me,ge)},$$slots:{default:!0}})}),o(d,ve)};let u=S(e,"onSuccessfulLogin",3,()=>{}),t=S(e,"class",3,"");const s=Ge();let n=x(""),l=x(""),h=x(""),L=x(""),A=x(""),ue=x(!1),z=x(!1),b=x(!1),we=x(!1),K=x(!1),be=x(!1);function Ue(d){d.code==="auth/user-not-found"?(a(L,"User not found."),a(A,"Try creating an account")):d.code==="auth/wrong-password"?(a(L,"Incorrect password."),a(A,"Please check your password and try again.")):d.code==="auth/invalid-email"?(a(L,"Invalid email."),a(A,"Please enter a valid email address.")):d.code==="auth/weak-password"?(a(L,"Password is too weak."),a(A,"Please choose a stronger password.")):d.code==="auth/email-already-in-use"?(a(L,"Email address is already in use."),a(A,"Please use a different email address.")):(a(L,"An unexpected error occurred."),a(A,"Uh that's awkward..."))}async function Be(d){d.preventDefault(),s.login(r(n),r(l)).then(()=>{a(ue,!1),a(b,!0),u()()}).catch(w=>{a(ue,!0),a(L,"Username or password is incorrect."),a(A,"Please check your credentials and try again.")}).finally(()=>{a(b,!1)})}async function De(d){d.preventDefault(),s.resetPassword(r(n)).then(()=>{a(z,!0),a(b,!0),a(L,"Password Reset Email Sent"),a(A,"Please check your inbox for further instructions.")}).catch(w=>{a(z,!1),Ue(w)}).finally(()=>{a(b,!1)})}async function Fe(d){if(r(l)!==r(h)){a(L,"Passwords do not match."),a(A,"Please check your password and try again."),a(K,!0);return}d.preventDefault(),a(b,!0),a(K,!1),await s.signUp(r(n),r(l)).then(()=>{u()()}).catch(w=>{a(K,!0),Ue(w)}).finally(()=>{a(b,!1)})}Me(()=>{s.user&&u()()});var Ie=te(),Ne=$(Ie);{var je=d=>{var w=_a();o(d,w)},ze=d=>{var w=te(),fe=$(w);const ve=Ae(()=>H("w-full max-w-sm mx-auto",t()));ee(fe,()=>ra,(Pe,ye)=>{ye(Pe,{get class(){return r(ve)},children:(xe,Re)=>{var me=xa(),$e=$(me);ee($e,()=>na,(W,oe)=>{oe(W,{class:"flex items-center",children:(ne,_e)=>{var T=te(),p=$(T);G(p,()=>e.children??Q),o(ne,T)},$$slots:{default:!0}})});var ge=m($e,2);ee(ge,()=>la,(W,oe)=>{oe(W,{children:(ne,_e)=>{var T=te(),p=$(T);{var ie=I=>{var P=pa(),he=k(P);ae(he,{type:"email",placeholder:"Email",required:!0,class:"w-full",get value(){return r(n)},set value(_){a(n,_,!0)}});var pe=m(he,2);{var R=_=>{i(_)};E(pe,_=>{r(z)&&_(R)})}var y=m(pe,2);const M=Ae(()=>r(b)||r(z));O(y,{type:"submit",class:"w-full",get disabled(){return r(M)},children:(_,X)=>{var q=ha(),B=$(q);{var Y=c=>{qe(c,{class:"mr-2 h-4 w-4 animate-spin"})};E(B,c=>{r(b)&&c(Y)})}var v=m(B);U(()=>Se(v,` ${r(z)?"Email Sent!":"Reset Password"}`)),o(_,q)},$$slots:{default:!0}});var V=m(y,2);O(V,{class:"pl-2",variant:"link",onclick:()=>{a(we,!1),a(ue,!1),a(K,!1)},children:(_,X)=>{F();var q=Z("Back to sign in");o(_,q)},$$slots:{default:!0}}),C(P),Le("submit",P,De),o(I,P)},de=(I,P)=>{{var he=R=>{var y=ba(),M=k(y);ae(M,{type:"email",placeholder:"Email",required:!0,class:"w-full",get value(){return r(n)},set value(v){a(n,v,!0)}});var V=m(M,2);ae(V,{type:"password",placeholder:"Password",required:!0,class:"w-full",get value(){return r(l)},set value(v){a(l,v,!0)}});var _=m(V,2);ae(_,{type:"password",placeholder:"Confirm Password",required:!0,class:"w-full",get value(){return r(h)},set value(v){a(h,v,!0)}});var X=m(_,2);{var q=v=>{i(v,()=>!0)};E(X,v=>{r(K)&&v(q)})}var B=m(X,2);O(B,{type:"submit",class:"w-full",get disabled(){return r(b)},children:(v,c)=>{var J=wa(),D=$(J);{var ke=ce=>{qe(ce,{class:"mr-2 h-4 w-4 animate-spin"})};E(D,ce=>{r(b)&&ce(ke)})}F(),o(v,J)},$$slots:{default:!0}});var Y=m(B,2);O(Y,{variant:"link",class:"",onclick:()=>{a(be,!1),a(K,!1)},children:(v,c)=>{F();var J=Z("Back to sign in");o(v,J)},$$slots:{default:!0}}),C(y),Le("submit",y,Fe),o(R,y)},pe=R=>{var y=ya(),M=k(y);ae(M,{type:"email",placeholder:"Email",required:!0,class:"w-full",get value(){return r(n)},set value(c){a(n,c,!0)}});var V=m(M,2);ae(V,{type:"password",placeholder:"Password",required:!0,class:"w-full",get value(){return r(l)},set value(c){a(l,c,!0)}});var _=m(V,2);{var X=c=>{i(c,()=>!0)};E(_,c=>{r(ue)&&c(X)})}var q=m(_,2);O(q,{type:"submit",class:"w-full",get disabled(){return r(b)},children:(c,J)=>{var D=Pa(),ke=$(D);{var ce=Ce=>{qe(Ce,{class:"mr-2 h-4 w-4 animate-spin"})};E(ke,Ce=>{r(b)&&Ce(ce)})}F(),o(c,D)},$$slots:{default:!0}});var B=m(q,2),Y=k(B);O(Y,{variant:"link",class:"",onclick:()=>{a(be,!0),a(z,!1)},children:(c,J)=>{F();var D=Z("Create an account");o(c,D)},$$slots:{default:!0}});var v=m(Y,2);O(v,{variant:"link",class:"",onclick:()=>{a(we,!0),a(z,!1)},children:(c,J)=>{F();var D=Z("Forgot password?");o(c,D)},$$slots:{default:!0}}),C(B),C(y),Le("submit",y,Be),o(R,y)};E(I,R=>{r(be)?R(he):R(pe,!1)},P)}};E(p,I=>{r(we)?I(ie):I(de,!1)})}o(ne,T)},$$slots:{default:!0}})}),o(xe,me)},$$slots:{default:!0}})}),o(d,w)};E(Ne,d=>{s.user?d(je):d(ze,!1)})}o(f,Ie),j()}var ka=g('<img alt="Logo" class="w-28 -mt-4 -mb-8">'),Ca=g('<div class="h-svh grid items-center p-3"><!></div>');function Na(f,e){N(e,!1);const i=He();function u(){i.authRedirect===Ee+"/login/"&&(i.authRedirect=Ee+"/"),We(i.authRedirect)}Te();var t=Ca(),s=k(t);$a(s,{onSuccessfulLogin:u,children:(n,l)=>{var h=ka();Ke(h,"src",`${Ee??""}/favicon.png`),o(n,h)},$$slots:{default:!0}}),C(t),o(f,t),j()}export{Na as component};
