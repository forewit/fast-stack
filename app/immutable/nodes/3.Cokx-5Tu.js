import{l as Te,d as X,c as d,t as m,e as le,f as Le}from"../chunks/6l-wXzpS.js";import{i as Ye}from"../chunks/BksjHSpr.js";import{h as Ve,D as Me,ay as Ge,B as He,O as S,t as F,Q as R,a3 as Z,R as U,P as z,w as T,z as Je,T as h,K as i,W as q,aq as Se,Y as r,al as K,aa as Xe,az as Ze}from"../chunks/W36Njmw1.js";import{I as ea,s as aa,b as ee,c as I,d as O,r as Ie,g as ra,a as ta}from"../chunks/Dv1qkHX3.js";import{L as Ee,C as sa,g as la}from"../chunks/LqQ4qqBe.js";import{b as qe}from"../chunks/iESkvpKe.js";import{g as oa}from"../chunks/B8TD0_vQ.js";import{s as Ae}from"../chunks/BwnCehNl.js";import{l as na,s as ia,p as y,r as ae,i as A}from"../chunks/D3MHlrNF.js";import{c as oe}from"../chunks/BSMk0joq.js";import{b as Q}from"../chunks/Bz1lSlSc.js";import{c as da,B as J}from"../chunks/BeHAigXs.js";function Fe(a,e,l=e){var c=Ge();Te(a,"input",t=>{var s=t?a.defaultValue:a.value;if(s=Re(a)?Ue(s):s,l(s),c&&s!==(s=e())){var n=a.selectionStart,o=a.selectionEnd;a.value=s??"",o!==null&&(a.selectionStart=n,a.selectionEnd=Math.min(o,a.value.length))}}),(Ve&&a.defaultValue!==a.value||He(e)==null&&a.value)&&l(Re(a)?Ue(a.value):a.value),Me(()=>{var t=e();Re(a)&&t===Ue(a.value)||a.type==="date"&&!t&&!a.value||t!==a.value&&(a.value=t??"")})}function Re(a){var e=a.type;return e==="number"||e==="range"}function Ue(a){return a===""?null:+a}function ca(a,e,l=e){Te(a,"change",()=>{l(a.files)}),Ve&&a.files&&l(a.files),Me(()=>{a.files=e()})}function ua(a,e){const l=na(e,["children","$$slots","$$events","$$legacy"]);ea(a,ia({name:"triangle-alert"},()=>l,{iconNode:[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3"}],["path",{d:"M12 9v4"}],["path",{d:"M12 17h.01"}]],children:(t,s)=>{var n=X(),o=S(n);aa(o,e,"default",{}),d(t,n)},$$slots:{default:!0}}))}var fa=m("<div><!></div>");function va(a,e){F(e,!0);let l=y(e,"ref",15,null),c=ae(e,["$$slots","$$events","$$legacy","ref","class","children"]);var t=fa();let s;var n=R(t);ee(n,()=>e.children??Z),U(t),Q(t,o=>l(o),()=>l()),z(o=>s=O(t,s,{class:o,...c}),[()=>I("bg-card text-card-foreground rounded-lg border shadow-sm",e.class)]),d(a,t),T()}var ma=m("<div><!></div>");function ga(a,e){F(e,!0);let l=y(e,"ref",15,null),c=ae(e,["$$slots","$$events","$$legacy","ref","class","children"]);var t=ma();let s;var n=R(t);ee(n,()=>e.children??Z),U(t),Q(t,o=>l(o),()=>l()),z(o=>s=O(t,s,{class:o,...c}),[()=>I("p-6",e.class)]),d(a,t),T()}var _a=m("<div><!></div>");function ha(a,e){F(e,!0);let l=y(e,"ref",15,null),c=ae(e,["$$slots","$$events","$$legacy","ref","class","children"]);var t=_a();let s;var n=R(t);ee(n,()=>e.children??Z),U(t),Q(t,o=>l(o),()=>l()),z(o=>s=O(t,s,{class:o,...c}),[()=>I("flex flex-col space-y-1.5 p-6 pb-0",e.class)]),d(a,t),T()}var ba=m("<input>"),pa=m("<input>");function ne(a,e){F(e,!0);let l=y(e,"ref",15,null),c=y(e,"value",15),t=y(e,"files",15),s=y(e,"onfocus",3,()=>{}),n=ae(e,["$$slots","$$events","$$legacy","ref","value","type","files","class","onfocus"]);var o=X(),b=S(o);{var P=E=>{var u=ba();Ie(u);let g;Q(u,B=>l(B),()=>l()),z(B=>g=O(u,g,{class:B,type:"file",...n}),[()=>I("border-input bg-background ring-offset-background placeholder:text-muted-foreground focus-visible:ring-ring flex h-10 w-full rounded-md border px-3 py-2 text-base file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e.class)]),ca(u,t),Fe(u,c),d(E,u)},k=E=>{var u=pa();Ie(u);var g=$=>{l().select(),s()($)};let B;Q(u,$=>l($),()=>l()),z($=>B=O(u,B,{class:$,type:e.type,onfocus:g,...n}),[()=>I("border-input bg-background ring-offset-background placeholder:text-muted-foreground focus-visible:ring-ring flex h-10 w-full rounded-md border px-3 py-2 text-base file:border-0 file:bg-transparent file:text-sm file:font-medium focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e.class)]),Fe(u,c),d(E,u)};A(b,E=>{e.type==="file"?E(P):E(k,!1)})}d(a,o),T()}const wa=da({base:"[&>svg]:text-foreground relative w-full rounded-lg border p-4 [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg~*]:pl-7",variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}});var ya=m("<div><!></div>");function xa(a,e){F(e,!0);let l=y(e,"ref",15,null),c=y(e,"variant",3,"default"),t=ae(e,["$$slots","$$events","$$legacy","ref","class","variant","children"]);var s=ya();let n;var o=R(s);ee(o,()=>e.children??Z),U(s),Q(s,b=>l(b),()=>l()),z(b=>n=O(s,n,{class:b,...t,role:"alert"}),[()=>I(wa({variant:c()}),e.class)]),d(a,s),T()}var Pa=m("<div><!></div>");function ka(a,e){F(e,!0);let l=y(e,"ref",15,null),c=ae(e,["$$slots","$$events","$$legacy","ref","class","children"]);var t=Pa();let s;var n=R(t);ee(n,()=>e.children??Z),U(t),Q(t,o=>l(o),()=>l()),z(o=>s=O(t,s,{class:o,...c}),[()=>I("text-sm [&_p]:leading-relaxed",e.class)]),d(a,t),T()}var $a=m("<div><!></div>");function Ca(a,e){F(e,!0);let l=y(e,"ref",15,null),c=y(e,"level",3,5),t=ae(e,["$$slots","$$events","$$legacy","ref","class","level","children"]);var s=$a();let n;var o=R(s);ee(o,()=>e.children??Z),U(s),Q(s,b=>l(b),()=>l()),z(b=>n=O(s,n,{role:"heading","aria-level":c(),class:b,...t}),[()=>I("mb-1 font-medium leading-none tracking-tight",e.class)]),d(a,s),T()}var La=m("<!> <!> <!>",1),Sa=m('<div class="w-full flex justify-center"><div class="w-8 h-8 border-4 border-primary border-t-transparent rounded-full animate-spin"></div></div>'),Ea=m("<!> ",1),qa=m('<form class="flex flex-col gap-4"><!> <!> <!> <!></form>'),Aa=m("<!> Create account",1),Ra=m('<form class="flex flex-col gap-4"><!> <!> <!> <!> <!> <!></form>'),Ua=m("<!> Login",1),za=m('<form class="flex flex-col gap-4"><!> <!> <!> <!> <div class="flex justify-between"><!> <!></div></form>'),Ba=m("<!> <!>",1);function Da(a,e){F(e,!0);const l=(f,x)=>{let ve=Xe(()=>Ze(x==null?void 0:x(),!1));var me=X(),ye=S(me);const xe=Se(()=>i(ve)?"destructive":"default");oe(ye,()=>xa,(Pe,De)=>{De(Pe,{class:"py-2",get variant(){return i(xe)},children:(ge,ke)=>{var _e=La(),re=S(_e);{var ie=w=>{ua(w,{class:"size-4"})},de=w=>{sa(w,{class:"size-4"})};A(re,w=>{i(ve)?w(ie):w(de,!1)})}var he=h(re,2);oe(he,()=>Ca,(w,ce)=>{ce(w,{children:(ue,V)=>{K();var C=le();z(()=>Ae(C,i(P))),d(ue,C)},$$slots:{default:!0}})});var W=h(he,2);oe(W,()=>ka,(w,ce)=>{ce(w,{children:(ue,V)=>{K();var C=le();z(()=>Ae(C,i(k))),d(ue,C)},$$slots:{default:!0}})}),d(ge,_e)},$$slots:{default:!0}})}),d(f,me)};let c=y(e,"onSuccessfulLogin",3,()=>{}),t=y(e,"class",3,"");const s=ra();let n=q(""),o=q(""),b=q(""),P=q(""),k=q(""),E=q(!1),u=q(!1),g=q(!1),B=q(!1),$=q(!1),we=q(!1);function ze(f){f.code==="auth/user-not-found"?(r(P,"User not found."),r(k,"Try creating an account")):f.code==="auth/wrong-password"?(r(P,"Incorrect password."),r(k,"Please check your password and try again.")):f.code==="auth/invalid-email"?(r(P,"Invalid email."),r(k,"Please enter a valid email address.")):f.code==="auth/weak-password"?(r(P,"Password is too weak."),r(k,"Please choose a stronger password.")):f.code==="auth/email-already-in-use"?(r(P,"Email address is already in use."),r(k,"Please use a different email address.")):(r(P,"An unexpected error occurred."),r(k,"Uh that's awkward..."))}async function Ne(f){f.preventDefault(),s.login(i(n),i(o)).then(()=>{r(E,!1),r(g,!0),c()()}).catch(x=>{r(E,!0),r(P,"Username or password is incorrect."),r(k,"Please check your credentials and try again.")}).finally(()=>{r(g,!1)})}async function je(f){f.preventDefault(),s.resetPassword(i(n)).then(()=>{r(u,!0),r(g,!0),r(P,"Password Reset Email Sent"),r(k,"Please check your inbox for further instructions.")}).catch(x=>{r(u,!1),ze(x)}).finally(()=>{r(g,!1)})}async function Ke(f){if(i(o)!==i(b)){r(P,"Passwords do not match."),r(k,"Please check your password and try again."),r($,!0);return}f.preventDefault(),r(g,!0),r($,!1),await s.signUp(i(n),i(o)).then(()=>{c()()}).catch(x=>{r($,!0),ze(x)}).finally(()=>{r(g,!1)})}Je(()=>{s.user&&c()()});var Be=X(),Oe=S(Be);{var Qe=f=>{var x=Sa();d(f,x)},We=f=>{var x=X(),ve=S(x);const me=Se(()=>I("w-full max-w-sm mx-auto",t()));oe(ve,()=>va,(ye,xe)=>{xe(ye,{get class(){return i(me)},children:(Pe,De)=>{var ge=Ba(),ke=S(ge);oe(ke,()=>ha,(re,ie)=>{ie(re,{class:"flex items-center",children:(de,he)=>{var W=X(),w=S(W);ee(w,()=>e.children??Z),d(de,W)},$$slots:{default:!0}})});var _e=h(ke,2);oe(_e,()=>ga,(re,ie)=>{ie(re,{children:(de,he)=>{var W=X(),w=S(W);{var ce=V=>{var C=qa(),be=R(C);ne(be,{type:"email",placeholder:"Email",required:!0,class:"w-full",get value(){return i(n)},set value(p){r(n,p,!0)}});var pe=h(be,2);{var M=p=>{l(p)};A(pe,p=>{i(u)&&p(M)})}var L=h(pe,2);const Y=Se(()=>i(g)||i(u));J(L,{type:"submit",class:"w-full",get disabled(){return i(Y)},children:(p,te)=>{var D=Ea(),N=S(D);{var se=v=>{Ee(v,{class:"mr-2 h-4 w-4 animate-spin"})};A(N,v=>{i(g)&&v(se)})}var _=h(N);z(()=>Ae(_,` ${i(u)?"Email Sent!":"Reset Password"}`)),d(p,D)},$$slots:{default:!0}});var G=h(L,2);J(G,{class:"pl-2",variant:"link",onclick:()=>{r(B,!1),r(E,!1),r($,!1)},children:(p,te)=>{K();var D=le("Back to sign in");d(p,D)},$$slots:{default:!0}}),U(C),Le("submit",C,je),d(V,C)},ue=(V,C)=>{{var be=M=>{var L=Ra(),Y=R(L);ne(Y,{type:"email",placeholder:"Email",required:!0,class:"w-full",get value(){return i(n)},set value(_){r(n,_,!0)}});var G=h(Y,2);ne(G,{type:"password",placeholder:"Password",required:!0,class:"w-full",get value(){return i(o)},set value(_){r(o,_,!0)}});var p=h(G,2);ne(p,{type:"password",placeholder:"Confirm Password",required:!0,class:"w-full",get value(){return i(b)},set value(_){r(b,_,!0)}});var te=h(p,2);{var D=_=>{l(_,()=>!0)};A(te,_=>{i($)&&_(D)})}var N=h(te,2);J(N,{type:"submit",class:"w-full",get disabled(){return i(g)},children:(_,v)=>{var H=Aa(),j=S(H);{var $e=fe=>{Ee(fe,{class:"mr-2 h-4 w-4 animate-spin"})};A(j,fe=>{i(g)&&fe($e)})}K(),d(_,H)},$$slots:{default:!0}});var se=h(N,2);J(se,{variant:"link",class:"",onclick:()=>{r(we,!1),r($,!1)},children:(_,v)=>{K();var H=le("Back to sign in");d(_,H)},$$slots:{default:!0}}),U(L),Le("submit",L,Ke),d(M,L)},pe=M=>{var L=za(),Y=R(L);ne(Y,{type:"email",placeholder:"Email",required:!0,class:"w-full",get value(){return i(n)},set value(v){r(n,v,!0)}});var G=h(Y,2);ne(G,{type:"password",placeholder:"Password",required:!0,class:"w-full",get value(){return i(o)},set value(v){r(o,v,!0)}});var p=h(G,2);{var te=v=>{l(v,()=>!0)};A(p,v=>{i(E)&&v(te)})}var D=h(p,2);J(D,{type:"submit",class:"w-full",get disabled(){return i(g)},children:(v,H)=>{var j=Ua(),$e=S(j);{var fe=Ce=>{Ee(Ce,{class:"mr-2 h-4 w-4 animate-spin"})};A($e,Ce=>{i(g)&&Ce(fe)})}K(),d(v,j)},$$slots:{default:!0}});var N=h(D,2),se=R(N);J(se,{variant:"link",class:"",onclick:()=>{r(we,!0),r(u,!1)},children:(v,H)=>{K();var j=le("Create an account");d(v,j)},$$slots:{default:!0}});var _=h(se,2);J(_,{variant:"link",class:"",onclick:()=>{r(B,!0),r(u,!1)},children:(v,H)=>{K();var j=le("Forgot password?");d(v,j)},$$slots:{default:!0}}),U(N),U(L),Le("submit",L,Ne),d(M,L)};A(V,M=>{i(we)?M(be):M(pe,!1)},C)}};A(w,V=>{i(B)?V(ce):V(ue,!1)})}d(de,W)},$$slots:{default:!0}})}),d(Pe,ge)},$$slots:{default:!0}})}),d(f,x)};A(Oe,f=>{s.user?f(Qe):f(We,!1)})}d(a,Be),T()}var Ia=m('<img alt="Logo" class="w-28 -mt-4 -mb-8">'),Fa=m('<div class="h-svh grid items-center p-3"><!></div>');function Ja(a,e){F(e,!1);const l=la();function c(){l.authRedirect===qe+"/login/"&&(l.authRedirect=qe+"/"),oa(l.authRedirect)}Ye();var t=Fa(),s=R(t);Da(s,{onSuccessfulLogin:c,children:(n,o)=>{var b=Ia();ta(b,"src",`${qe??""}/favicon.png`),d(n,b)},$$slots:{default:!0}}),U(t),d(a,t),T()}export{Ja as component};
